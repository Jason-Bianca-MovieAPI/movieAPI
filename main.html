<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MoviesAPI</title>
</head>

<div class="movies">MOVIES</div>

<input class="addInput" id="addInput" placeholder="Add Movie">
<button class="addMovie" type="submit">Add Movie</button>

<!--<input class="removeInput">-->
<!--<button class="deleteMovie">Delete Movie</button>-->


<script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous">

</script>

<script>
    const URL = "https://capable-zenith-layer.glitch.me/movies";
    fetch(URL)
        .then(response => response.json())
        .then(data => {
            console.log(data);
            console.log('type ' + typeof (data[0].title));
            data.forEach(movies => {
                $('.movies').append(`<div>${movies.title} ${movies.rating}</div>`)
            });


            $('.addMovie').click((e) => {
                e.preventDefault()
                let inputText = $("#addInput").val();
                let inputRating = "4";

                let movieObj = {
                    title: inputText,
                    rating: inputRating
                };

                let options = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(movieObj),
                };
            })
            fetch(URL, options)
                .then(response => response.json())
                .catch(error => console.log(error))
            $('.movies').append("<div>" + $("#addInput").val() + $(movieObj.rating) + "</div>");

        });


    // TODO: need to insert input text to append()
    // $('.addMovie').click ((e)=> {
    //     });


    // const deleteFunc = {
    //     method: 'DELETE',
    //     id: '24',
    //     headers: {
    //         'Content-Type': 'application/json',
    //     },
    //     body: JSON.stringify(movieObj),
    // };


    //     let textInput = $('.input').val();
    //     $('.deleteMovie').click(
    // //delete movies by ID
    //         fetch(`${URL}/27`,
    //             {method: 'DELETE'})
    //     )

</script>
</body>
</html>