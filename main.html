<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MoviesAPI</title>
</head>

<div class="movies">MOVIES</div>

<input class="addInput" id="addInput" placeholder="Add Movie">
<button class="addMovie" type="submit">Add Movie</button>

<!--<input class="removeInput">-->
<!--<button class="deleteMovie">Delete Movie</button>-->


<script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous">

</script>

<script>
    const URL = "https://capable-zenith-layer.glitch.me/movies";

    let inputText = $("#addInput").val();

    let reviewObj = {
        title: inputText,
        rating: 4
    };

    let options = {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(reviewObj),
    };

    const deleteFunc = {
        method: 'DELETE',
        id: '24',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(reviewObj),
    };

    fetch(URL)
        .then(response => response.json())
        .then(data => {
            console.log(data);
            console.log('type ' + typeof(data[0].title));

            data.forEach( movies => {
                $('.movies').append(`<div>${movies.title} ${movies.rating}</div>`)
            });

        })
        .catch(error => console.log(error))
// TODO: need to insert input text to append()
    $('.addMovie').click( function (e) {
        e.preventDefault()
        // fetch(URL, options)
        //     .then(response => response.json())
        $('.movies').append(`<div>$("#addInput").val() ${reviewObj.rating}</div>`)
        console.log($(`#addInput`).val());
        console.log(typeof(JSON.stringify($("#addInput").val())));
        console.log(reviewObj);
    });

//     let textInput = $('.input').val();
//     $('.deleteMovie').click(
// //delete movies by ID
//         fetch(`${URL}/27`,
//             {method: 'DELETE'})
//     )

</script>
</body>
</html>